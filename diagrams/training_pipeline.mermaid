%% Diagrama 3: Pipeline de Treinamento
flowchart TD
    subgraph "FASE 1: COLETA DE DADOS"
        A[ðŸ“¹ VÃ­deos Normais<br/>Comportamento Regular] --> B[ExtraÃ§Ã£o de Frames<br/>30 FPS â†’ 5 FPS]
        B --> C[PrÃ©-processamento<br/>Resize, NormalizaÃ§Ã£o]
    end
    
    subgraph "FASE 2: EXTRAÃ‡ÃƒO DE FEATURES"
        C --> D[ðŸ”„ Optical Flow<br/>Lucas-Kanade/Farneback]
        D --> E[Mapas de Movimento<br/>Magnitude + DireÃ§Ã£o]
        E --> F[SequÃªncias Temporais<br/>Janelas de N frames]
    end
    
    subgraph "FASE 3: TREINAMENTO CAE"
        F --> G[ðŸ§  Convolutional<br/>Autoencoder]
        G --> H[Encoder<br/>ExtraÃ§Ã£o Features]
        H --> I[Bottleneck<br/>RepresentaÃ§Ã£o Compacta]
        I --> J[Decoder<br/>ReconstruÃ§Ã£o]
        J --> K[Loss MSE<br/>Original vs ReconstruÃ­do]
    end
    
    subgraph "FASE 4: TREINAMENTO ConvLSTM"
        K --> L{CAE Convergiu?}
        L -->|NÃ£o| G
        L -->|Sim| M[Features do Encoder<br/>Fixar Pesos CAE]
        M --> N[ðŸ”„ ConvLSTM<br/>AnÃ¡lise Temporal]
        N --> O[Hidden States<br/>MemÃ³ria Sequencial]
        O --> P[PrediÃ§Ã£o PrÃ³ximo Frame<br/>Features Espaciais]
        P --> Q[Loss PrediÃ§Ã£o<br/>Erro Temporal]
    end
    
    subgraph "FASE 5: VALIDAÃ‡ÃƒO"
        Q --> R{ConvLSTM Convergiu?}
        R -->|NÃ£o| N
        R -->|Sim| S[Teste com Dados<br/>de ValidaÃ§Ã£o]
        S --> T[MÃ©tricas AvaliaÃ§Ã£o<br/>MSE, MAE, Threshold]
        T --> U[Modelo Final<br/>Pronto para Deploy]
    end
    
    subgraph "PARÃ‚METROS"
        V[ðŸ“Š HiperparÃ¢metros<br/>Learning Rate: 0.001<br/>Batch Size: 2<br/>Epochs: 30<br/>Sequence Length: 10]
    end
    
    V -.-> G
    V -.-> N
    
    style A fill:#e8f5e8
    style D fill:#fff3e0
    style G fill:#f3e5f5
    style N fill:#e1f5fe
    style U fill:#ffebee