graph TB
    subgraph "ENTRADA"
        A[📹 Fonte de Vídeo<br/>Câmera/Arquivo]
    end
    
    subgraph "PROCESSAMENTO CORE"
        B[Frame Extraction<br/>64x64 resize]
        C[🔄 Optical Flow<br/>Farneback Dense]
        D[Buffer Temporal<br/>Sequências de 10 frames]
        
        subgraph "MODELOS PARALELOS"
            E[🧠 CAE Model<br/>Análise Espacial]
            F[🔄 ConvLSTM Model<br/>Análise Temporal]
        end
        
        G[Fusão de Scores<br/>CAE + ConvLSTM]
    end
    
    subgraph "DECISÃO E AÇÃO"
        H{Score > Threshold?}
        I[🚨 ANOMALIA]
        J[✅ NORMAL]
    end
    
    subgraph "PERSISTÊNCIA"
        K[(SQLite DB)]
        L[📸 Screenshots]
        M[🌐 Dashboard Web]
    end
    
    A --> B
    B --> C
    C --> D
    D --> E
    D --> F
    E --> G
    F --> G
    G --> H
    H -->|Sim| I
    H -->|Não| J
    I --> K
    I --> L
    K --> M
    L --> M
    
    style E fill:#f3e5f5
    style F fill:#e1f5fe
    style I fill:#ffebee
    style G fill:#fff3e0